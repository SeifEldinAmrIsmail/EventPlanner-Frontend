<!-- Top pill nav (back to home) -->
<div class="top-pills">
  <a routerLink="/home" class="pill" aria-label="Back to home">
    <i class="bi bi-arrow-left-short"></i>
    Back to home
  </a>
</div>

<!-- Page background + centered card -->
<div class="screen">
  <div class="card">

    <div class="card-head">
      <div class="logo-glow">
        <i class="bi bi-calendar-plus"></i>
      </div>
      <h1>Create a new event</h1>
      <p class="sub">Add the details for your next event</p>
    </div>

    <!-- Error toast -->
    <div *ngIf="error" class="toast toast-error" role="alert">
      <i class="bi bi-x-circle"></i>
      <span>{{ error }}</span>
    </div>

    <form [formGroup]="form" (ngSubmit)="submit()" class="form">

      <!-- Title -->
      <label class="field">
        <span class="label">Title <b>*</b></span>
        <div class="input-wrap" [class.invalid]="form.get('title')?.invalid && form.get('title')?.touched">
          <div class="lead"><i class="bi bi-type"></i></div>
          <input formControlName="title" type="text" placeholder="e.g., Product Launch Meetup" />
        </div>
        <small class="hint" *ngIf="form.get('title')?.invalid && form.get('title')?.touched">
          Title is required (min 3 characters).
        </small>
      </label>

      <!-- Date -->
      <label class="field two-col">
        <span class="label">Date <b>*</b></span>
        <div class="input-wrap" [class.invalid]="form.get('date')?.invalid && form.get('date')?.touched">
          <div class="lead"><i class="bi bi-calendar3"></i></div>
          <input formControlName="date" type="date" />
        </div>
        <small class="hint" *ngIf="form.get('date')?.invalid && form.get('date')?.touched">
          Date is required.
        </small>
      </label>

      <!-- Time -->
      <label class="field two-col">
        <span class="label">Time <b>*</b></span>
        <div class="input-wrap" [class.invalid]="form.get('time')?.invalid && form.get('time')?.touched">
          <div class="lead"><i class="bi bi-clock"></i></div>
          <input formControlName="time" type="time" />
        </div>
        <small class="hint" *ngIf="form.get('time')?.invalid && form.get('time')?.touched">
          Time is required.
        </small>
      </label>

      <!-- Location -->
      <label class="field">
        <span class="label">Location</span>
        <div class="input-wrap">
          <div class="lead"><i class="bi bi-geo-alt"></i></div>
          <input formControlName="location" type="text" placeholder="e.g., Hall A, Nile Expo Center" />
        </div>
      </label>

      <!-- Description -->
      <label class="field">
        <span class="label">Description</span>
        <div class="input-wrap ta">
          <div class="lead"><i class="bi bi-text-paragraph"></i></div>
          <textarea formControlName="description" rows="4" placeholder="What is this event about?"></textarea>
        </div>
      </label>

      <!-- Actions -->
      <div class="actions">
        <button class="btn-primary" type="submit" [disabled]="form.invalid || submitting">
          <ng-container *ngIf="!submitting; else busy">
            <i class="bi bi-plus-lg"></i>
            Create event
          </ng-container>
          <ng-template #busy>
            <span class="spinner"></span>
            Creatingâ€¦
          </ng-template>
        </button>

        <!-- updated to go home -->
        <a routerLink="/home" class="btn-ghost">
          Cancel
        </a>
      </div>
    </form>

  </div>
</div>
