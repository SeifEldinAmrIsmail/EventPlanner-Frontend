<!-- Top pills -->
<div class="top-pills">
  <a routerLink="/home" class="pill" aria-label="Back to home">
    <i class="bi bi-house"></i> Home
  </a>
  <a routerLink="/events" class="pill" aria-label="Back to events">
    <i class="bi bi-arrow-left-short"></i> Events
  </a>
</div>

<!-- Screen background + centered card -->
<div class="screen">
  <div class="loading" *ngIf="busy"></div>

  <!-- Error / empty -->
  <div class="card glass error" *ngIf="!busy && error && !event">
    <h3>Couldn’t load event</h3>
    <p class="muted">{{ error }}</p>
  </div>
  <div class="card glass empty" *ngIf="!busy && !error && !event">
    <h3>Event not found</h3>
    <p class="muted">The event you’re looking for doesn’t exist or was removed.</p>
  </div>

  <!-- Detail -->
  <div class="card glass" *ngIf="event as e">
    <header class="head">
      <div class="icon-bubble"><i class="bi bi-calendar-event"></i></div>
      <h1 class="title">{{ e.title }}</h1>

      <div class="chips">
        <div class="chip"><i class="bi bi-calendar3"></i> {{ e.date | date:'fullDate' }}</div>
        <div class="chip"><i class="bi bi-clock"></i> {{ e.time }}</div>
        <div class="chip" *ngIf="e.location"><i class="bi bi-geo-alt"></i> {{ e.location }}</div>
      </div>
    </header>

    <section class="desc" *ngIf="e.description">
      <p>{{ e.description }}</p>
    </section>

    <!-- Unified attendees (no status buckets) -->
    <section class="attendees">
      <div class="section-head">
        <h3>Attendees <span class="count">({{ allAttendees.length }})</span></h3>
      </div>

      <ul class="people" *ngIf="allAttendees.length; else noAttendees">
        <li class="person" *ngFor="let a of allAttendees">
          <span class="avatar">{{ (a.email || '?')[0] | uppercase }}</span>
          <span class="email">{{ a.email }}</span>
          <span class="me" *ngIf="a.is_me">me</span>
        </li>
      </ul>
      <ng-template #noAttendees>
        <div class="muted">No attendees yet.</div>
      </ng-template>
    </section>

    <footer class="danger-zone">
      <button class="btn danger" (click)="deleteEvent()" [disabled]="busy">
        <i class="bi bi-trash"></i> Delete event
      </button>
    </footer>

    <div class="inline-error" *ngIf="error">{{ error }}</div>
  </div>
</div>
