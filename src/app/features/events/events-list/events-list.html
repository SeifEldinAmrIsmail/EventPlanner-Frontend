<div class="page">

  <!-- Back pill (same pattern as create page) -->
  <div class="top-pills">
    <a routerLink="/home" class="pill" aria-label="Back to home">
      <i class="bi bi-arrow-left-short"></i>
      Back to home
    </a>
  </div>

  <!-- Toolbar -->
  <div class="toolbar">
    <div class="seg">
      <button class="seg-btn" [class.active]="segment==='organized'" (click)="segment='organized'">Organizer</button>
      <button class="seg-btn" [class.active]="segment==='invited'" (click)="segment='invited'">Invited</button>
    </div>

    <div class="search">
      <input
        type="text"
        placeholder="Search by title, place, or date…"
        [(ngModel)]="q"
      />
    </div>

    <a class="create" routerLink="/events/new">＋ Create Event</a>
  </div>

  <!-- Alerts -->
  <div class="alerts">
    <div class="toast success" *ngIf="success">{{ success }}</div>
    <div class="toast error" *ngIf="error">{{ error }}</div>
  </div>

  <!-- Results -->
  <div class="card" *ngIf="results.length; else empty">
    <div class="list">
      <div class="row" *ngFor="let e of results">
        <div class="left">
          <div class="title">{{ e.title }}</div>
          <div class="meta">
            <span class="chip">
              <i class="bi bi-calendar3"></i>
              {{ e.date | date:'EEE, MMM d' }}
            </span>
            <span class="chip">
              <i class="bi bi-clock"></i>
              {{ e.time }}
            </span>
            <span class="chip" *ngIf="e.location">
              <i class="bi bi-geo-alt"></i>
              {{ e.location }}
            </span>
          </div>
        </div>
        <div class="right">
          <a class="btn view" (click)="view(e.id)">View</a>
          <button class="btn danger" *ngIf="segment==='organized'" (click)="remove(e.id)">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty state -->
  <ng-template #empty>
    <div class="card empty">
      <h3>No {{ segment === 'organized' ? 'organized' : 'invited' }} events</h3>
      <p *ngIf="segment==='organized'">Create your first event to get started.</p>
      <p *ngIf="segment==='invited'">You don’t have invitations yet.</p>
    </div>
  </ng-template>
</div>
